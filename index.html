<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>7th Grade Quiz + Arcade</title>
  <style>
    body { font-family: Arial, sans-serif; background:#f0f0f0; margin:0; padding:0; }
    header { background:#4CAF50; color:#fff; padding:10px; text-align:center; }
    .container { padding:20px; }
    .hidden { display:none; }
    .game-frame { width:100%; height:500px; border:none; }
    .arcade-grid { display:grid; grid-template-columns:repeat(5,1fr); gap:10px; }
    button { padding:10px 15px; margin:5px; cursor:pointer; }
    canvas { background:#000; display:block; margin:auto; }
  </style>
</head>
<body>
  <header>
    <h1>7th Grade Quiz + Arcade</h1>
    <div>Energy: <span id="energy">0</span> | Play Time: <span id="playTime">0</span>s</div>
  </header>
  <div class="container">
    <div id="menu">
      <h2>Select Subject</h2>
      <button onclick="startQuiz('Math')">Math</button>
      <button onclick="startQuiz('Science')">Science</button>
      <button onclick="startQuiz('ELA')">ELA</button>
      <button onclick="startQuiz('Social Studies')">Social Studies</button>
      <h2>Shop</h2>
      <button onclick="buyUpgrade('scholar')">Scholar (More energy/question)</button>
      <button onclick="buyUpgrade('timeSaver')">Time Saver (More seconds/energy)</button>
      <button onclick="convertEnergy()">Convert Energy â†’ Play Time</button>
      <h2>Arcade</h2>
      <div class="arcade-grid" id="arcade"></div>
    </div>
    <div id="quiz" class="hidden">
      <h2 id="quizSubject"></h2>
      <p id="question"></p>
      <input type="text" id="answer" />
      <button onclick="submitAnswer()">Submit</button>
      <button onclick="backToMenu()">Back</button>
    </div>
    <div id="game" class="hidden">
      <div id="gameContainer"></div>
      <button onclick="closeGame()">Close Game</button>
    </div>
  </div>

  <script>
    // ---------------- STATS ----------------
    let energy = 0;
    let playTime = 0;
    let energyPerQ = 1;
    let secPerEnergy = 10;

    // ---------------- QUESTIONS ----------------
    const questions = [];
    function generateQuestions(){
      // Math (100)
      for(let i=1;i<=100;i++){
        let a=Math.floor(Math.random()*20)+1;
        let b=Math.floor(Math.random()*20)+1;
        let op=['+','-','*'][i%3];
        let ans=eval(a+op+b);
        questions.push({subject:'Math',q:`(${i}) What is ${a} ${op} ${b}?`,a:ans.toString()});
      }
      // Science (10 repeated for 100)
      const scienceQs=[
        ["What planet is known as the Red Planet?","Mars"],
        ["What gas do humans need to breathe?","Oxygen"],
        ["What is H2O commonly known as?","Water"],
        ["What force pulls objects toward Earth?","Gravity"],
        ["What galaxy is Earth located in?","Milky Way"],
        ["What part of the plant makes food?","Leaf"],
        ["What organ pumps blood?","Heart"],
        ["What is the process of liquid turning to gas?","Evaporation"],
        ["What is the center of an atom called?","Nucleus"],
        ["What gas do plants release during photosynthesis?","Oxygen"]
      ];
      for(let i=0;i<100;i++){
        let pair=scienceQs[i%scienceQs.length];
        questions.push({subject:'Science',q:`(${i+1}) ${pair[0]}`,a:pair[1]});
      }
      // ELA (100)
      const elaQs=[
        ["What is a synonym for 'happy'?","joyful"],
        ["What is an antonym for 'big'?","small"],
        ["Fill in the blank: Their ___ going to the park.","they're"],
        ["What is the plural of 'mouse'?","mice"],
        ["What punctuation ends a question?","?"],
        ["What part of speech is 'quickly'?","adverb"],
        ["What is the past tense of 'run'?","ran"],
        ["What do we call words that sound alike but have different meanings?","homonyms"],
        ["What is the opposite of 'cold'?","hot"],
        ["What is the main character in a story called?","protagonist"]
      ];
      for(let i=0;i<100;i++){
        let pair=elaQs[i%elaQs.length];
        questions.push({subject:'ELA',q:`(${i+1}) ${pair[0]}`,a:pair[1]});
      }
      // Social Studies (100)
      const socialQs=[
        ["Who was the first President of the USA?","George Washington"],
        ["What year did World War II end?","1945"],
        ["What is the capital of France?","Paris"],
        ["Which ancient civilization built the pyramids?","Egyptians"],
        ["What ocean is on the east coast of the USA?","Atlantic"],
        ["Who wrote the Declaration of Independence?","Thomas Jefferson"],
        ["What is the largest continent?","Asia"],
        ["What is the capital of Japan?","Tokyo"],
        ["What country is known as the Land of the Rising Sun?","Japan"],
        ["Who discovered America in 1492?","Christopher Columbus"]
      ];
      for(let i=0;i<100;i++){
        let pair=socialQs[i%socialQs.length];
        questions.push({subject:'Social Studies',q:`(${i+1}) ${pair[0]}`,a:pair[1]});
      }
    }
    generateQuestions();

    let currentQ;
    function startQuiz(subject){
      document.getElementById('menu').classList.add('hidden');
      document.getElementById('quiz').classList.remove('hidden');
      document.getElementById('quizSubject').innerText=subject;
      askQuestion(subject);
    }
    function askQuestion(subject){
      const pool=questions.filter(q=>q.subject===subject);
      currentQ=pool[Math.floor(Math.random()*pool.length)];
      document.getElementById('question').innerText=currentQ.q;
      document.getElementById('answer').value='';
    }
    function submitAnswer(){
      const ans=document.getElementById('answer').value.trim();
      if(ans.toLowerCase()===currentQ.a.toLowerCase()){
        energy+=energyPerQ;
        updateStats();
        alert('Correct! +'+energyPerQ+' energy');
      } else {
        alert('Incorrect! Correct answer was: '+currentQ.a);
      }
      askQuestion(currentQ.subject);
    }
    function backToMenu(){
      document.getElementById('quiz').classList.add('hidden');
      document.getElementById('menu').classList.remove('hidden');
    }

    // ---------------- SHOP ----------------
    function buyUpgrade(type){
      if(type==='scholar' && energy>=50){
        energy-=50; energyPerQ++;
        alert('Scholar upgrade purchased!');
      }
      if(type==='timeSaver' && energy>=50){
        energy-=50; secPerEnergy+=5;
        alert('Time Saver upgrade purchased!');
      }
      updateStats();
    }
    function convertEnergy(){
      if(energy>0){
        playTime+=energy*secPerEnergy;
        energy=0;
        updateStats();
      }
    }
    function updateStats(){
      document.getElementById('energy').innerText=energy;
      document.getElementById('playTime').innerText=playTime;
    }

    // ---------------- GAMES ----------------
    const GAMES = [
      {name:"Snake",func:simpleSnake},
      {name:"Pong",func:simplePong},
      {name:"Breakout",func:simpleBreakout},
      {name:"Tetris",func:simpleTetris},
      {name:"Flappy",func:simpleFlappy}
    ];
    for(let i=GAMES.length;i<30;i++){ GAMES.push({name:"Game "+(i+1),func:null}); }

    const arcadeDiv=document.getElementById('arcade');
    GAMES.forEach((g,i)=>{
      let btn=document.createElement('button');
      btn.innerText=g.name;
      btn.onclick=()=>openGame(g);
      arcadeDiv.appendChild(btn);
    });

    let playTimer;
    function openGame(game){
      if(!game.func){alert('No game here yet.');return;}
      if(playTime<=0){alert('Not enough play time!');return;}
      document.getElementById('menu').classList.add('hidden');
      document.getElementById('game').classList.remove('hidden');
      document.getElementById('gameContainer').innerHTML=game.func();
      playTimer=setInterval(()=>{
        playTime--;
        updateStats();
        if(playTime<=0){
          alert('Out of time!');
          closeGame();
        }
      },1000);
    }
    function closeGame(){
      document.getElementById('game').classList.add('hidden');
      document.getElementById('menu').classList.remove('hidden');
      document.getElementById('gameContainer').innerHTML='';
      clearInterval(playTimer);
    }

    // ---------------- MINI GAMES ----------------
    function simpleSnake(){
      return `
      <canvas id="snakeCanvas" width="400" height="400"></canvas>
      <script>
        const canvas=document.getElementById("snakeCanvas");
        const ctx=canvas.getContext("2d");
        const box=20;
        let snake=[{x:9*box,y:10*box}];
        let food={x:Math.floor(Math.random()*19+1)*box,y:Math.floor(Math.random()*19+1)*box};
        let d;
        document.addEventListener("keydown",dir);
        function dir(e){ if(e.keyCode==37 && d!="RIGHT")d="LEFT";
          else if(e.keyCode==38 && d!="DOWN")d="UP";
          else if(e.keyCode==39 && d!="LEFT")d="RIGHT";
          else if(e.keyCode==40 && d!="UP")d="DOWN"; }
        function draw(){
          ctx.fillStyle="black";ctx.fillRect(0,0,400,400);
          for(let i=0;i<snake.length;i++){ctx.fillStyle="lime";ctx.fillRect(snake[i].x,snake[i].y,box,box);}
          ctx.fillStyle="red";ctx.fillRect(food.x,food.y,box,box);
          let snakeX=snake[0].x; let snakeY=snake[0].y;
          if(d=="LEFT")snakeX-=box; if(d=="UP")snakeY-=box; if(d=="RIGHT")snakeX+=box; if(d=="DOWN")snakeY+=box;
          if(snakeX==food.x && snakeY==food.y){ food={x:Math.floor(Math.random()*19+1)*box,y:Math.floor(Math.random()*19+1)*box}; }
          else{ snake.pop(); }
          let newHead={x:snakeX,y:snakeY}; snake.unshift(newHead);
        }
        setInterval(draw,100);
      <\\/script>
      `;
    }
    function simplePong(){
      return `<iframe src="https://pong-2.com/" width="600" height="400"></iframe>`;
    }
    function simpleBreakout(){
      return `<iframe src="https://elgoog.im/breakout/" width="600" height="400"></iframe>`;
    }
    function simpleTetris(){
      return `<iframe src="https://tetris.com/play-tetris" width="600" height="500"></iframe>`;
    }
    function simpleFlappy(){
      return `<iframe src="https://flappybird.io/" width="400" height="600"></iframe>`;
    }

    updateStats();
  </script>
</body>
</html>
